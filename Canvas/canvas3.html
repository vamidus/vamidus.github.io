<html>
<head>
  <script type="text/javascript">
    var myCanvas;
    var boxMaxWidth = 100;
    
    function addEvent(obj, evType, fn){
      if (obj.addEventListener){
        obj.addEventListener(evType, fn, false);
        return true;
      } else if (obj.attachEvent){
        var r = obj.attachEvent("on" + evType, fn);
        return r;
      } else {
        return false;
      }
    }
    
    function doStuff(e) {
      var baseColorR = Math.floor(Math.random() * 140) + 100;
      var baseColorG = Math.floor(Math.random() * 170) + 60;
      var baseColorB = Math.floor(Math.random() * 250) + 4;
      //document.getElementById('myBody').bgColor = 'rgb(' + 100/baseColorR * 255 + ',' + 100/baseColorG * 255 + ',' + 100/baseColorB * 255 + ')';
      var context = myCanvas.getContext('2d');
      context.clearRect(0,0,myCanvas.clientWidth,myCanvas.clientHeight);
      for (var i = 0; i < 1000; i++) {
        var nW = Math.floor(Math.random() * boxMaxWidth);
        var nX = Math.floor((Math.random() * (myCanvas.clientWidth - nW*2) + nW ));
        var nY = Math.floor((Math.random() * (myCanvas.clientHeight - nW*2) + nW ));
        var nN1 = ((myCanvas.clientWidth / 2));
        var nN2 = ((myCanvas.clientHeight / 2));
        var nR = Math.floor(Math.random() * baseColorR);
        var nG = Math.floor(Math.random() * baseColorG);
        var nB = Math.floor(Math.random() * baseColorB);
        var nA = Math.random();
        context.shadowOffsetX = 0;
        context.shadowOffsetY = 0;
        context.shadowBlur = nW/3;
        context.shadowColor = 'rgba(' + nR + ',' + nG + ',' + nB + ',1)';
//        context.fillStyle = 'rgba(' + nR + ',' + nG + ',' + nB + ',' + nA + ')';
        var gradient = context.createRadialGradient(nX, nY, nW * .96, nX, nY, nW );
        gradient.addColorStop(0, 'rgba(' + nR + ',' + nG + ',' + nB + ',.1)');
        gradient.addColorStop(1, 'rgba(' + nR + ',' + nG + ',' + nB + ',.3)');
        context.beginPath();
        context.arc(nX, nY, nW, 0, 2 * Math.PI, false);
        context.fillStyle = gradient;
        context.fill();
        //context.stroke();
      }
      //context.translate(myCanvas.clientWidth/2, myCanvas.clientHeight/2);
      //context.rotate(1 * Math.PI / 180);
      //context.restore();
    }
    
    function initStuff() {
      var myBody = document.getElementById('myBody');
      myCanvas = document.createElement('canvas');
      myCanvas.width=myBody.clientWidth;
      myCanvas.height=myBody.clientHeight;
      myCanvas.id = 'myCanvas';
      myBody.appendChild(myCanvas);
    }
    
    addEvent(window, "load", function(event){initStuff()});
    addEvent(window, "click", function(event){doStuff(event)});
    
  </script>
  <style type="text/css">
    body {
      margin: 0;
    }
  </style>
</head>
<body id='myBody'>
</body>
</html>
