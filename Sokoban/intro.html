<html>
    <head>
		<title>-=[倉庫番]=-</title>
		<meta charset="utf-8">
		<meta name="description" content="https://en.wikipedia.org/wiki/Sokoban">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">
		<link rel="shortcut icon" type="image/png" href="./CSS/Images/favicon.png"/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <style>
            @font-face {
                font-family: 'IBM VGA 8x16';
                src: url('./CSS/Web437_IBM_VGA_8x16.woff') format('woff');
                font-weight: normal;
                font-style: normal;
            }
            body {
                background-color: black;
                color: black;
                font-family: 'IBM VGA 8x16', monospace;
                font-size: 24px;
                margin: 0;
                padding: 0;
                scroll-behavior: smooth;
            }
            #logo {
                background-image: url('./CSS/Images/sokoban_logo.png');
                background-position: center;
                background-repeat: no-repeat;
                background-size: contain;
                display: none;
                image-rendering: pixelated;
                opacity: 0;
                position: absolute;
                height: 100%;                
                width: 100%;
            }
            .story {
                background-position: center;
                background-repeat: no-repeat;
                background-size: contain;
                display: none;
                position: absolute;
                width: 100%;
                height: 100%;
            }
            #story1 {
                background-image: url('./CSS/Images/intro - plate 1.gif');
            }
            #story2 {
                background-image: url('./CSS/Images/intro - plate 2.gif');
            }
            #story3 {
                background-image: url('./CSS/Images/intro - plate 3.gif');
            }
            #story4 {
                background-image: url('./CSS/Images/intro - plate 4.gif');
            }
            footer {
                display: none;
                position: fixed;
                bottom: 2em;
                text-align: center;
                width: 100%;
            }
            footer button {
                background: none;
                border: none;
                color: white;
            }
            #mute, 
            #unmute {
                display: none;
            }
            .blink {
                animation: blink 1s linear infinite;
            }
            @keyframes blink {
                50% { opacity: 0; }
            }
            @media (max-height: 200px) {
                #logo {
                    image-rendering: auto;
                }
            }
        </style>
        <script>
            let $footer = null;
            let $logo = null;
            let $story1 = null;
            let $story2 = null;
            let $story3 = null;
            let $story4 = null;
            let storyPage = 1;

            $(document).ready(function () {
                $footer = $("footer");
                $logo = $("#logo");
                $story1 = $("#story1");
                $story2 = $("#story2");
                $story3 = $("#story3");
                $story4 = $("#story4");
                $logo.show().animate({opacity: 1}, 3000).animate({opacity: 0}, 3000, "linear", function () {
                    $(document).on("click", handleKeyPress.bind(this));
                    $(document).on("keydown", handleKeyPress.bind(this));
                    showStory();
                });
            });
            function handleKeyPress() {
                showStory();
            }
            function showStory() {
                $story1.hide();
                $story2.hide();
                $story3.hide();
                $story4.hide();
                $footer.hide();
                switch (storyPage) {
                    case 1:
                        $story1.show();
                        setTimeout(function () {$footer.show()}, 4000);
                        break
                    case 2:
                        $story2.show();
                        setTimeout(function () {$footer.show()}, 6000);
                        break
                    case 3:
                        $story3.show();
                        setTimeout(function () {$footer.show()}, 7000);
                        break
                    case 4:
                        $story4.show();
                        setTimeout(function () {$footer.show()}, 4000);
                        break
                    case 5:
                        window.location.replace("./index.html");
                }
                storyPage++;
            }
        </script>
    </head>
    <body>   
        <div id="logo"></div>
        <div class="story" id="story1" aria-label="
                Once upon a time, in a small town, a young man from a poor
                family and a daughter of a wealthy businessman fell in love.
            ">
        </div>
        <div class="story" id="story2" aria-label="
                The young girl's father did not approve of this!
                You are not worthy of holding my daughter's sandals, let alone her hand!
                - he yelled.

                I am willing to prove my worthiness! I'll do anything!
                - exclaimed young man.
            ">
        </div>
        <div class="story" id="story3" aria-label="
                Anything, huh?
                Well, I guess even an insolent peasant such as yourself deserves a chance.
                Now, go to my warehouse and straighten out the place!
                Move all the crates to their designated areas!
                And don't let me catch you meandering in there, or you'll never see my daughter again!
                Now, out with you!!!
                - barked the father.
            ">
        </div>
        <div class="story" id="story4" aria-label="
                I'll came back victorious!
                - proclaimed young man.

                Please come back soon!
                - sighed young girl.

                Hahahaha!
                - snickered the father.
            ">
        </div>
        <footer>
            <button class="blink" type="button">PRESS ANY KEY TO CONTINUE...</button>
        </footer>
    </body>
</html>